(this.webpackJsonptodo_client=this.webpackJsonptodo_client||[]).push([[0],{39:function(e,t,a){e.exports=a(68)},44:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(36),o=a.n(c),s=(a(44),a(10)),l=a(17),u=a(2),i=r.a.createContext(),m=a(9);var p=function(e){var t=e.children,a=e.redirectPath,c=Object(m.a)(e,["children","redirectPath"]),o=Object(n.useContext)(i).context;return r.a.createElement(n.Fragment,null,o.user.id?r.a.createElement(u.b,c,t):r.a.createElement(u.a,{to:a}))};var d=function(e){var t=e.children,a=e.redirectPath,c=Object(m.a)(e,["children","redirectPath"]),o=Object(n.useContext)(i).context;return r.a.createElement(n.Fragment,null,o.user.id?r.a.createElement(u.a,{to:a}):r.a.createElement(u.b,c,t))},b=a(4),v=a(5),f=a.n(v),E=a(12),h=a(13),g=a.n(h),j="https://to-do-bp.herokuapp.com";var O=function(e){var t=e.children,a=e.className,n=e.icon,c=e.min,o=e.colorPrimary,s=e.colorSecondary,l=e.primary,u=e.secondary,i=Object(m.a)(e,["children","className","icon","min","colorPrimary","colorSecondary","primary","secondary"]);return l?a+=" button--primary":u&&(a+=" button--secondary"),o&&(a+=" button--color-primary"),s&&(a+=" button--color-secondary"),c&&(a+=" button--min-w"),n&&(a+=" button--icon"),r.a.createElement("button",Object.assign({className:"button ".concat(""," ").concat(a)},i),t)};var w=function(e){var t=e.children,a=e.password,n=e.className,c=e.pure,o=Object(m.a)(e,["children","password","className","pure"]),s="";return c&&(s+=" input--pure"),r.a.createElement("input",Object.assign({className:"input ".concat(s," ").concat(n),type:a?"password":"text"},o),t)};var x=function(e){var t=e.children,a=Object(m.a)(e,["children"]);return r.a.createElement("label",Object.assign({className:"input__label"},a),t)};var _=function(e){var t=e.label,a=e.password,n=e.error,c=e.onChange,o=(Object(m.a)(e,["label","password","error","onChange"]),n?r.a.createElement("span",{className:"input__error"},n):null);return r.a.createElement("div",{className:"input__container"},r.a.createElement(x,null,t),r.a.createElement(w,{password:a,onChange:c}),o)};var y=function(e){var t=Object(n.useContext)(i).setContext,a=Object(u.g)(),c=Object(n.useState)({username:null,password:null}),o=Object(s.a)(c,2),l=o[0],m=o[1],p=Object(n.useState)(""),d=Object(s.a)(p,2),v=d[0],h=d[1],w=function(){var e=Object(E.a)(f.a.mark((function e(n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n.preventDefault(),l.username&&l.password){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,g.a.post(j+"/user/login",{username:l.username,password:l.password});case 6:r=e.sent.data,t({user:{id:r.user.id,username:r.user.username},notes:r.notes}),a.push("/profile"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"dialog__container"},r.a.createElement("form",{className:"dialog",onSubmit:w},r.a.createElement("h1",{className:"dialog__heading"},"Zaloguj si\u0119"),r.a.createElement(_,{label:"Nazwa u\u017cytkownika",onChange:function(e){e.persist(),m((function(t){return Object(b.a)(Object(b.a)({},t),{},{username:e.target.value})})),h("")}}),r.a.createElement(_,{label:"Has\u0142o",error:v,password:!0,onChange:function(e){e.persist(),m((function(t){return Object(b.a)(Object(b.a)({},t),{},{password:e.target.value})})),h("")}}),r.a.createElement("div",{className:"dialog__action-btns"},r.a.createElement(O,{primary:!0,min:!0},"Zaloguj si\u0119"),r.a.createElement("span",{className:"dialog__separator"},"lub"),r.a.createElement(O,{colorSecondary:!0,min:!0,onClick:function(e){e.preventDefault(),a.push("/signup")}},"Za\u0142\xf3\u017c konto"))))};var k=function(){return r.a.createElement(y,null)};var N=function(){var e=Object(n.useContext)(i).setContext,t=Object(u.g)(),a=Object(n.useState)({username:null,password:null}),c=Object(s.a)(a,2),o=c[0],l=c[1],m=function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.preventDefault(),t.next=4,g.a.post(j+"/user",{username:o.username,password:o.password});case 4:n=t.sent.data,e({user:{id:n.id,username:n.username},notes:null}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"dialog__container"},r.a.createElement("form",{className:"dialog"},r.a.createElement("h1",{className:"dialog__heading"},"Za\u0142\xf3\u017c konto"),r.a.createElement(_,{label:"Podaj nazw\u0119 u\u017cytkownika",onChange:function(e){e.persist(),l((function(t){return Object(b.a)(Object(b.a)({},t),{},{username:e.target.value})}))}}),r.a.createElement(_,{label:"Podaj has\u0142o",password:!0,onChange:function(e){e.persist(),l((function(t){return Object(b.a)(Object(b.a)({},t),{},{password:e.target.value})}))}}),r.a.createElement("div",{className:"dialog__action-btns"},r.a.createElement(O,{secondary:!0,min:!0,onClick:m},"Za\u0142\xf3\u017c konto"),r.a.createElement("span",{className:"dialog__separator"},"lub"),r.a.createElement(O,{colorPrimary:!0,min:!0,onClick:function(e){e.preventDefault(),t.push("/")}},"Zaloguj si\u0119"))))};var C=function(){return r.a.createElement(N,null)},P=a(14),S=a(15);var z=function(){var e=Object(n.useContext)(i),t=e.context,a=e.setContext,c=function(){var e=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.post(j+"/user/logout");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:return e.prev=8,a({user:{id:null,username:null},notes:null}),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[0,5,8,11]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("nav",{className:"nav"},r.a.createElement("p",{className:"nav__welcome"},"Hello ",r.a.createElement("span",{className:"nav__username"},t.user.username)),r.a.createElement(O,{icon:!0,onClick:c},r.a.createElement(P.a,{icon:S.d,size:"lg"})))},Z=a(38);var D=function(){var e=Object(n.useContext)(i).setContext,t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],l=function(){var t=Object(E.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a.preventDefault(),c.length){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,g.a.post(j+"/notes",{body:c});case 6:n=t.sent.data,e((function(e){return Object(b.a)(Object(b.a)({},e),{},{notes:null===e.notes?[{id:n.id,body:n.body}]:[].concat(Object(Z.a)(e.notes),[{id:n.id,body:n.body}])})})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:return t.prev=13,o(""),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("form",{className:"create__form",onSubmit:l},r.a.createElement("div",{className:"note note--create"},r.a.createElement(w,{pure:!0,placeholder:"Napisz notatk\u0119...",value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement("div",{className:"note__btns"},r.a.createElement(O,{icon:!0},r.a.createElement(P.a,{icon:S.b})))))};var F=function(e){var t=e.id,a=e.body,c=Object(n.useContext)(i).setContext,o=Object(n.useState)(!1),l=Object(s.a)(o,2),u=l[0],m=l[1],p=Object(n.useState)(a),d=Object(s.a)(p,2),v=d[0],h=d[1],x=function(){var e=Object(E.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.put(j+"/notes/"+t,{body:v});case 3:a=e.sent.data,c((function(e){return Object(b.a)(Object(b.a)({},e),{},{notes:e.notes.map((function(e){return e.id===t?{id:a.id,body:a.body}:e}))})})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response.data.message||e.t0);case 10:return e.prev=10,m(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.delete(j+"/notes/"+t);case 3:c((function(e){return Object(b.a)(Object(b.a)({},e),{},{notes:1===e.notes.length?null:e.notes.filter((function(e){return e.id!==t}))})})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),y=u?r.a.createElement(w,{pure:!0,autoFocus:!0,value:v,onChange:function(e){h(e.target.value)}}):r.a.createElement("p",{className:"note__text"},a),k=u?r.a.createElement(O,{icon:!0,onClick:x},r.a.createElement(P.a,{icon:S.c})):r.a.createElement(n.Fragment,null,r.a.createElement(O,{className:"note__btn",icon:!0,onClick:function(){m(!0)}},r.a.createElement(P.a,{icon:S.a})),r.a.createElement(O,{icon:!0,onClick:_},r.a.createElement(P.a,{icon:S.e,size:"lg"})));return r.a.createElement("div",{className:"note"},y,r.a.createElement("div",{className:"note__btns"},k))};var B=function(){var e=Object(n.useContext)(i).context,t=null!==e.notes?e.notes.map((function(e){return r.a.createElement(F,Object.assign({key:e.id},e))})).reverse():r.a.createElement("p",null,"Brak notatek");return r.a.createElement("section",{className:"notes"},t)};var H=function(){return r.a.createElement("div",{className:"profile-container"},r.a.createElement(z,null),r.a.createElement("div",{className:"dialog__container"},r.a.createElement("article",{className:"dialog"},r.a.createElement("h1",{className:"dialog__heading--sm"},"Twoje rzeczy do zrobienia"),r.a.createElement(D,null),r.a.createElement(B,null))))};var J=function(){var e=Object(n.useState)({user:{id:null,username:null},notes:null}),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"container"},r.a.createElement(i.Provider,{value:{context:a,setContext:c}},r.a.createElement(l.a,null,r.a.createElement(u.d,null,r.a.createElement(d,{exact:!0,path:"/",redirectPath:"/profile"},r.a.createElement(k,null)),r.a.createElement(d,{path:"/signup",redirectPath:"/profile"},r.a.createElement(C,null)),r.a.createElement(p,{path:"/profile",redirectPath:"/"},r.a.createElement(H,null)),r.a.createElement(u.a,{to:"/"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.ef05d123.chunk.js.map